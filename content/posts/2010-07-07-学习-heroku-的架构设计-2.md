---
title: å­¦ä¹  HeroKu çš„æ¶æ„è®¾è®¡
author: admin
type: post
date: 2010-07-07T15:29:10+00:00
url: /archives/4496
IM_data:
 - 'a:8:{s:52:"http://www.dbanotes.net/Images/HeroKu%20Overview.jpg";s:60:"http://blog.haohtml.com/wp-content/uploads/2011/03/54c31.jpg";s:59:"http://www.dbanotes.net/Images/HeroKu%20Reverse%20Proxy.jpg";s:60:"http://blog.haohtml.com/wp-content/uploads/2011/03/7990f.jpg";s:56:"http://www.dbanotes.net/Images/HeroKu%20HTTP%20cache.jpg";s:60:"http://blog.haohtml.com/wp-content/uploads/2011/03/d167a.jpg";s:58:"http://www.dbanotes.net/Images/HeroKu%20Routing%20Mesh.jpg";s:60:"http://blog.haohtml.com/wp-content/uploads/2011/03/f0e48.jpg";s:55:"http://www.dbanotes.net/Images/HeroKu%20Dyno%20Grid.jpg";s:60:"http://blog.haohtml.com/wp-content/uploads/2011/03/1f0a7.jpg";s:62:"http://www.dbanotes.net/Images/HeroKu%20Dyno%20Grid%20Arch.jpg";s:60:"http://blog.haohtml.com/wp-content/uploads/2011/03/d68ad.jpg";s:52:"http://www.dbanotes.net/Images/HeroKu%20Database.jpg";s:60:"http://blog.haohtml.com/wp-content/uploads/2011/03/a00f5.jpg";s:53:"http://www.dbanotes.net/Images/HeroKu%20Memcached.jpg";s:60:"http://blog.haohtml.com/wp-content/uploads/2011/03/58c24.jpg";}'
IM_contentdowned:
 - 1
categories:
 - ç³»ç»Ÿæ¶æ„
tags:
 - ç½‘ç«™æ¶æ„
 - æ¶æ„

---
è¿™å‡ å¤©ç»™æˆ‘å°è±¡æ¯”è¾ƒæ·±çš„æ˜¯ [HeroKu][1] ï¼Œæä¾› Ruby å¿«é€Ÿéƒ¨ç½²ç¯å¢ƒå¹¶æä¾›æ‰˜ç®¡èƒ½åŠ›ï¼Œä»–ä»¬çš„æ¶æ„å›¾åšå¾—ååˆ†æ¼‚äº®ï¼Œä¸€å¹…å›¾èƒœè¿‡åƒè¨€ä¸‡è¯­ï¼Œè¦æ˜¯å¯¹ Web æ¶æ„æ„Ÿå…´è¶£ï¼Œéƒ½åˆ«é—®æ¶æ„å¸ˆäº†ï¼Œçœ‹çœ‹ HeroKu çš„æ¶æ„ä¼°è®¡å°±æ˜ç™½ä¸ªå·®ä¸å¤šäº† ğŸ™‚

**æ¦‚è§ˆå›¾**

å¥½çš„æ¶æ„å›¾æ˜¯ç”»å‡ºæ¥çš„ï¼Œå¥½çš„æ¶æ„æœªå¿…æ˜¯è®¾è®¡å‡ºæ¥çš„ï¼Œæœ€åæ¶æ„å¥½ä¸å¥½ï¼Œè¿˜è¦çœ‹æŒç»­çš„æ”¹è¿›èƒ½åŠ›ã€‚

![HeroKu Overview.jpg](http://www.dbanotes.net/Images/HeroKu%20Overview.jpg)

**HTTP åå‘ä»£ç†**

ä½¿ç”¨ [Nginx][2] , è¿™ä¸€å±‚åªè¿›è¡Œ HTTP-level çš„å¤„ç†ã€‚Nginx ç°åœ¨æ˜¯ä¸äºŒé€‰æ‹©ã€‚

![HeroKu Reverse Proxy.jpg](http://www.dbanotes.net/Images/HeroKu%20Reverse%20Proxy.jpg)

**HTTP Cache**

å¯¹äºé™æ€å†…å®¹ï¼Œä½¿ç”¨ [Varnish][3] è¿›è¡Œç¼“å­˜ã€‚å¦‚æœä½ åœ¨ Squid å’Œ Varnish ä¹‹é—´ä½œé€‰æ‹©ï¼Œè¿™é‡Œå·²ç»æŠ•äº†ä¸€ç¥¨ã€‚

![HeroKu HTTP  cache.jpg](http://www.dbanotes.net/Images/HeroKu%20HTTP%20cache.jpg)

**è·¯ç”±ç½‘(Routing Mesh)**

ç”¨ [Erlang][4] å®ç°çš„æ¶æ„ç»„ä»¶ï¼Œè·¯ç”±å¯»å€ï¼Œç”¨ä»¥æå‡å¯ç”¨æ€§å’Œæ‰©å±•æ€§ã€‚

![HeroKu Routing Mesh.jpg](http://www.dbanotes.net/Images/HeroKu%20Routing%20Mesh.jpg)

**åŠ¨æ€ç½‘æ ¼(Dyno Grid)**

ç”¨æˆ·éƒ¨ç½²çš„ä»£ç è¿è¡Œåœ¨è¿™é‡Œï¼Œå¯ä»¥ç®€å•çœ‹æˆæ˜¯åº”ç”¨æœåŠ¡å™¨é›†ç¾¤ç¯å¢ƒï¼Œåªæ˜¯ç²’åº¦æ›´å°ä¸€ç‚¹è€Œå·²ã€‚

![HeroKu Dyno Grid.jpg](http://www.dbanotes.net/Images/HeroKu%20Dyno%20Grid.jpg)

å¯¹äº Dyno Grid çš„è¿›ä¸€æ­¥ä¿¡æ¯ï¼š

![HeroKu Dyno Grid Arch.jpg](http://www.dbanotes.net/Images/HeroKu%20Dyno%20Grid%20Arch.jpg)

æœåŠ¡å™¨æ“ä½œç³»ç»Ÿæ˜¯ Debian ï¼›Ruby VM æ˜¯ MRI ï¼Œå¼€æºï¼ŒC å†™çš„ï¼›App Server ç”¨çš„ [Thin][5]ï¼Œä»–ä»¬è¯´ Thin æ¯” [Mongrel][6] æ›´ç²¾ç‚¼ï¼›Rackï¼Œåº”ç”¨æœåŠ¡å™¨æ¥å£ï¼›Rack ä¸­é—´ä»¶ï¼Œå¯é€‰ç»„ä»¶ï¼›æ¡†æ¶ï¼Œä»»ä½• Rack å…¼å®¹çš„éƒ½æˆï¼›æœ€åæ˜¯å®¢æˆ·æ‰˜ç®¡çš„ä»£ç ã€‚

**æ•°æ®åº“**

[PostgreSQL][7]ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨è¿œç¨‹æ•°æ®åº“ã€‚

![HeroKu Database.jpg](http://www.dbanotes.net/Images/HeroKu%20Database.jpg)

**Memory Cache**

Memcached ï¼Œå±…å®¶æ—…è¡Œæ¶æ„å¿…å¤‡ã€‚

![HeroKu Memcached.jpg](http://www.dbanotes.net/Images/HeroKu%20Memcached.jpg)

è¿™å‡ å¼ å›¾çœ‹ä¸‹æ¥ï¼Œå¤šå°‘ç®—æ˜¯å¯¹ Ruby ç¯å¢ƒæœ‰äº†ä¸€äº›æ„Ÿæ€§è®¤è¯†ã€‚å¯ä»¥è¿›ä¸€æ­¥æŸ¥çœ‹ HeroKu æä¾›çš„[æ–‡æ¡£][8]ï¼ŒåŒ…å«äº†ä¸€äº›ä»£ç å®ç°ä¸Šçš„å‡†åˆ™ã€‚

éƒ¨ç½²æ˜¯åŸºäº [Git][9] çš„ã€‚ä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰æ³¨æ„åˆ° Git åœ¨æœ€è¿‘ä¸€å¹´æ¥çš„çˆ†å‘? è¶…è¿‡ SVN æˆ–è®¸ä¸æ˜¯ä¸å¯èƒ½çš„ã€‚

å›½å†…çƒ­ç‚’â€äº‘è®¡ç®—â€çš„ï¼Œè·Ÿäººå®¶å­¦å­¦å§ï¼Œä¸å…¶æ•´å¤©å¸®ç€å®¢æˆ·å¼€å‘å®šåˆ¶è½¯ä»¶ï¼Œè¿˜ä¸å¦‚ç»™å®¢æˆ·æä¾›ä¸€äº›å¼¹æ€§åº”ç”¨æ‰˜ç®¡ç¯å¢ƒï¼Œèµ·ç çœ‹èµ·æ¥é è°±ä¸€äº›ã€‚

HeroKu ï¼Œä¸è¯» Hero-Ku, è¯»ä½œ Her-oh-koo, æŒºæœ‰è¶£

æ¥æºï¼š [http://www.dbanotes.net/arch/heroku_architecture.html](http://www.dbanotes.net/arch/heroku_architecture.html)

 [1]: http://heroku.com/
 [2]: http://nginx.net/
 [3]: http://varnish.projects.linpro.no/
 [4]: http://erlang.org/
 [5]: http://code.macournoyer.com/thin/
 [6]: http://en.wikipedia.org/wiki/Mongrel_%28web_server%29
 [7]: http://www.postgresql.org/
 [8]: http://heroku.com/docs
 [9]: http://git-scm.com/