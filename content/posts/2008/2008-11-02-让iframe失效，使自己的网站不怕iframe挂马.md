---
title: 让iframe失效，使自己的网站不怕iframe挂马
author: admin
type: post
date: 2008-11-02T13:20:17+00:00
excerpt: |
 方法一:
 ＂FSO功能：＂－"关闭站点Fso功能"．将站点的fso功能关闭掉．这样子基本上就可以杜绝目前的asp木马．如果需要上传附件的话．可以通过"SAFileUp"．"aspupload"．等组件进行上传．

 方法二:
 　　辛辛苦苦做的网站突然被挂马，究其原因是因为网页带病毒，打开代码发现所有的页面的代码最后一行都多了一句：
url: /archives/509
IM_contentdowned:
 - 1
categories:
 - 前端设计

---

**方法一:**

＂FSO功能：＂－”关闭站点Fso功能”．将站点的fso功能关闭掉．这样子基本上就可以杜绝目前的asp木马．如果需要上传附件的话．可以通过”SAFileUp”．”aspupload”．等组件进行上传．

**方法二:**

辛辛苦苦做的网站突然被挂马，究其原因是因为网页带病毒，打开代码发现所有的页面的代码最后一行都多了一句：

引用内容

< IFRAME src=”http://www.xxx.xxx “>< /IFRAME >

打开引用页面一看防病毒软件一顿乱响，找到元凶了这可怎办？

最后一行怎么弄都不行？！！

其实很简单我们只需要在 < STYLE >< / STYLE > 之间加上一句

完整如下：

程序代码

就可以了其实这是用了CSS样式表来对网页中所有的FRAME对象进行”洗脑”把iframe中的src属性的值换成空白页这样加进去的iFRAME 代码就不起作用了。

这个解决方案除了IFRAME里面的JS代码alert方法不能屏蔽之外，其他任意JS都可以不起作用。

如果要使自己的IFRAME显示在网页里，别人挂的IFRAME马都不起作用，在CSS里加一个

程序代码

#f126{v:e xpression() !important}

就OK了，

对应的IFRAME代码为

程序代码

：

当然挂马者可以构造这样的代码

引用内容

使这个防御方式失效，不过它得特意去看这里的CSS里iframe里的前缀v,如果我们的v是变化的呢，哈哈，是不是也不管用呢！


其实还有一种方法同样是使用CSS样式表来防范我们这次需要在CSS加上一大段：

引用内容

xmp {

width:1px;

overflow:hidden;

text-overflow:clip;

white-space: nowrap;

clear: none;

float: none;

line-height: 0px;

display: inline;

}

然后在网页的最后一行加上一个标签< XMP >这样也同样能是加在网页最后一行的iframe失效。原来CSS除了好看还能干点别的：-）

另外除了上面两种方法以外我们还可以在所有asp文件的最后一行加上

程序代码

< % response.end() % >

让脚本运行到这里就停止运行不论后面再写什么东西。

其实这只是治标的办法要治本还有找到真正的“马”那就需要大家的眼力了看看网页目录里面有没有异常的文件——扩展名异常。

比如在一大堆的asp文件里面突然多了一个php的文件或者有一个jsp又或者有一个asa文件那你就危险了！那个文件就很有可能就是一匹是真正的“马”了。

小结：以上的方法只是使IFRAME里的文件不起作用，但以后的挂马方式改变了，就不能用这种方法了，例如改成方式挂，就不能用这种方法解决了