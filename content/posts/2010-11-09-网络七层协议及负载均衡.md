---
title: 网络七层协议及负载均衡
author: admin
type: post
date: 2010-11-09T01:40:37+00:00
url: /archives/6580
IM_contentdowned:
 - 1
categories:
 - 系统架构
tags:
 - 负载均衡

---
根据OSI模型把网络通信的工作分为七层.一至四层被认为是低层,这些层与数据移动密切相关.五至七层是高层,包含应用程序级的数据.每一层负责一项具体的工作,然后把数据传送到下一层.由低到高具体分为:物理层.数据链路层,网络层,传输层,会话层,表示层和应用层.

[![](http://blog.haohtml.com/wp-content/uploads/2010/11/osi.gif)][1]

**OSI模型的最低层或第一层:物理层**

物理层包含物理连网网媒介,实际上就是布线,光纤,网卡和其它用来把两台网络通信设备连接在一起的设施.它规定了激活,维持,关闭通信端之间的机械特性,电气特性,功能特性及过程特性.虽然物理层不提供纠错服务,但它能够设定数据传输速率并监测数据出错率.

**OSI模型的第二层:数据链路层**

数据链路层的主要作用是控制网络层与物理层之间的通信.它保证了数据在不可靠的物理线路上进行可靠的传递.它把从网络层接收到的数据侵害成特定的可被牧师层传输的帧,保证了传输的可靠性.它的主要作用包括:物理地址寻址,数据的成帧,流量控制,数据的栓错,重发等.它是独立于网络层和物理层的,工作时无须关心计算机是否在运行软件还是其它操作.
数据链路层协议主要有:SDLC,DHLC,PPP,STP,帧中继等.

**OSI模型的第三层:网络层**

很多用户经常混淆第二层和第三层的界限,简单来说,如果你在谈论一个与IP地址,,路由协议或者地址解析协议)ARP)相关的问题,那么这就是第三层的问题.

网络层负责对子网间的数据包进行路由选择,它通过综合考虑发磅仁德权,网络拥塞程度,服务质量及可选路由的花费来决定一个网络中两个节点的最佳路径.另外,它还可以实现拥塞控制,网际互联等功能.

网络层协议有:IP,IPX,RIP,OSPF等.

**OSI模型第四层:传输层**

传输层是OSI模型中最重要的一层,它是两台计算机经过网络进行数据通信时,第一个端到端的层次,起到缓冲作用.当网络层的服务质量不能满足要求时,它将提高服务,以满足高层的要求;而当风纪支服务质量较好时,它只段进行很少的工作.另外,它还要处理到的差错控制和流量控制等问题,最终为会话提供可靠的,无误的传输.

传输层协议主要有:TCP,UDP,SPX等.

在IP协议栈中第四层是TCP(传输控制协议)和UDP(用户数据报协议)所在的协议层.TCP和UDP包含端口号,它可以唯一区分每个数据包追念哪些应用协议((如HTTP,TCP,TELNET等).TCP/UDP端口号提供的附加信息可以为网络交换机所利用,四层交换机利用这种信息来区分包中的数据,这是第四层交换的基础.

**OSI模型第五层:会话层**

会话层负责在网络中两节点之间建立和维持通信,并保持会话同步,它还决定通信是否中断,以级通信中断时决定从何处重新发送.

**OSI模型的第六层:表示层**

表示层的作用是管理数据的解密与加密,如常见的系统口令处理,当您的账户数据在发送前被加密,在网络的另一端,表示层将对接收到的数据解密.另外表示层还要对图片和文件格式信息进行解码和编码.

**OSI模型第七层:应用层**

简单来说,应用层就是为操作系统或者网络应用程序提供访问网络服务接口,包括文件传输,文件管理及电子邮件等的信息处理.

应用层协议有:TELNET FTP HTTP SNMP等.

负载均衡产品有:

工作在第四层产品有:LVS

工作在第七层的产品有:

软件的七层负载均衡大多基于HTTP反向代理方式,代表产品有nginx, l7sw(layer swiithing), haproxy等.

nginx的反向代理负载均衡能够很好地支持虚拟主机,可配置性很强,可以按轮询,IP哈希,URL哈希,权重等多种方式对后端服务器做负载均衡,同时还支持后端服务器的健康检查.对于使用nginx的负载均衡实例见: [http://blog.haohtml.com/archives/6573](http://blog.haohtml.com/archives/6573)

 [1]: http://blog.haohtml.com/wp-content/uploads/2010/11/osi.gif