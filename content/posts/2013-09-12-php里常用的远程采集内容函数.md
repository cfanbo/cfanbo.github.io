---
title: php里常用的远程采集函数
author: admin
type: post
date: 2013-09-12T08:01:35+00:00
url: /archives/14458
categories:
 - 程序开发
tags:
 - curl
 - 采集
 - php

---

```
/**
 * 获取远程url的内容
 * @param string $url
 * @return string
 */
function get_url_content($url) {
  if(function_exists(curl_init)) {
    $ch = curl_init();
    $timeout = 5;
    curl_setopt ($ch, CURLOPT_URL, $url);
    curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt ($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
    curl_setopt ($ch, CURLOPT_TIMEOUT, $timeout);

    $file_contents = curl_exec($ch);
    curl_close($ch);
  } else {
    $file_contents = file_get_contents($url);
  }

  return $file_contents;
}

```

测试

```
$url = 'http://www.baidu.com';
$a = get_url_content($url);
echo $a;

```