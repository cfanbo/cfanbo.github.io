---
title: PHP中的max_input_vars指令
author: admin
type: post
date: 2016-11-13T03:53:26+00:00
url: /archives/17167
categories:
 - 程序开发
tags:
 - php

---
今天接到客服部工作人员反馈的一个问题，客户使用产品系统是允许用户添加产品属性的，而每个属性是由多个表单域组成 ，这样当每添加一个属性就等于添加了n个表单域，这个客户添加的非常的多，发现在提交保存的时候总是失败，提示其中一个表单元素的索引值不存在，经测试是发现服务端接收的一些表单域丢失了一部分。起初分析的是服务器接收的数据超出了php设置的max\_post\_size(其实当时已经设置了8M，足够使用了)，修改了测试发现此问题仍然存在。后来将用户原来的一些添加的表单元素进行删除，再重新添加同样数据库表单域可以成功，但一旦超出一定数量的表单域就会发生丢失的情况，这个时候首先怀疑的是apache是否有类似限制接收隐藏域的指令，找了没有找到，紧接着在php中批到一个max\_input\_vars这个指令，意思就是说php中允许接收的最大表单域数据，到目前为止基本上是确定这个原因引起的了，奖其修改为2000,重启Apache，发现一切正常。

总结：提起php中的max\_input\_vars 估计很少人知道这个这个指令，因为他的使用场景实在是太少了，在php.ini中这个指令的定义是指服务端最大可以接收的表单域的数量多少，默认是1000，这足够我们平时使用了。但仍然有一些特殊的情况下需要修改此值的大小。