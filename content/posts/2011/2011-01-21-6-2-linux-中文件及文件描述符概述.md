---
title: 6.2 Linux 中文件及文件描述符概述
author: admin
type: post
date: 2011-01-21T05:44:08+00:00
url: /archives/7549
IM_contentdowned:
 - 1
categories:
 - 程序开发
tags:
 - Linux

---

正如第1 章中所述，在Linux 中对目录和设备的操作都等同于文件的操作，因此，大大简化了系统对不同设备的处理，提高了效率。Linux 中的文件主要分为4 种：普通文件、目录文件、链接文件和设备文件。

那么，内核如何区分和引用特定的文件呢？这里用到的就是一个重要的概念——文件描述符。对于Linux 而言，所有对设备和文件的操作都使用文件描述符来进行的。文件描述符是一个非负的整数，它是一个索引值，并指向内核中每个进程打开文件的记录表。当打开一个现存文件或创建一个新文件时，内核就向进程返回一个文件描述符；当需要读写文件时，也需要把文件描述符作为参数传递给相应的函数。

通常，一个进程启动时，都会打开3 个文件：标准输入、标准输出和标准出错处理。这3 个文件分别对应文件描述符为0、1 和2（也就是宏替换STDIN_FILENO、STDOUT_FILENO和STDERR_FILENO，鼓励读者使用这些宏替换）。

基于文件描述符的I/O 操作虽然不能移植到类Linux 以外的系统上去（如Windows），但它往往是实现某些I/O操作的惟一途径，如Linux中低级文件操作函数、多路I/O、TCP/IP套接字编程接口等。同时，它们也很好地兼容POSIX标准，因此，可以很方便地移植到任何POSIX平台上。基于文件描述符的I/O操作是Linux中最常用的操作之一，希望读者能够很好地掌握。