---
title: mysql的默认查询优先还是更新（insert、update、delete）优先关系
author: admin
type: post
date: 2010-01-24T09:12:16+00:00
excerpt: |
 MySQL还允许改变语句调度的优先级，它可以使来自多个客户端的查询更好地协作，这样单个客户端就不会由于锁定而等待很长时间。改变优先级还可以确保特定类型的查询被处理得更快。

 我们首先应该确定应用的类型，判断应用是以查询为主还是以更新为主的，是确保查询效率还是确保更新的效率，决定是查询优先还是更新优先。

 下面我们提到的改变调度策略的方法主要是针对Myisam存储引擎的，对于Innodb存储引擎，语句的执行是由获得行锁的顺序决定的。

 MySQL的默认的调度策略可用总结如下：

 1. 写入操作优先于读取操作。

 2. 对某张数据表的写入操作某一时刻只能发生一次，写入请求按照它们到达的次序来处理。

 3. 对某张数据表的多个读取操作可以同时地进行。
url: /archives/2883
IM_contentdowned:
 - 1
categories:
 - MySQL
tags:
 - mysql
 - mysql优化

---
MySQL还允许改变语句调度的优先级，它可以使来自多个客户端的查询更好地协作，这样单个客户端就不会由于锁定而等待很长时间。改变优先级还可以确保特定类型的查询被处理得更快。

我们首先应该确定应用的类型，判断应用是以查询为主还是以更新为主的，是确保查询效率还是确保更新的效率，决定是查询优先还是更新优先。

下面我们提到的改变调度策略的方法主要是针对Myisam存储引擎的，对于Innodb存储引擎，语句的执行是由获得行锁的顺序决定的。

**MySQL的默认的调度策略可用总结如下：**

1. 写入操作优先于读取操作。

2. 对某张数据表的写入操作某一时刻只能发生一次，写入请求按照它们到达的次序来处理。

3. 对某张数据表的多个读取操作可以同时地进行。

**MySQL提供了几个语句调节符，允许你修改它的调度策略：**

1. LOW_PRIORITY关键字应用于DELETE、INSERT、LOADDATA、REPLACE和UPDATE。

2. HIGH_PRIORITY关键字应用于SELECT和INSERT语句。

3. DELAYED关键字应用于INSERT和REPLACE语句。

如果写入操作是一个LOW\_PRIORITY（低优先级）请求，那么系统就不会认为它的优先级高于读取操作。在这种情况下，如果写入者在等待的时候，第二个读取者到达了，那么就允许第二个读取者插到写入者之前。只有在没有其它的读取者的时候，才允许写入者开始操作。这种调度修改可能存在LOW\_PRIORITY写入操作永远被阻塞的情况。

SELECT查询的HIGH_PRIORITY（高优先级）关键字也类似。它允许SELECT插入正在等待的写入操作之前，即使在正常情况下写入操作的优先级更高。另外一种影响是，高优先级的SELECT在正常的SELECT语句之前执行，因为这些语句会被写入操作阻塞。

如果你希望所有支持LOW\_PRIORITY选项的语句都默认地按照低优先级来处理，那么请使用–low-priority-updates选项来启动服务器。通过使用INSERTHIGH\_PRIORITY来把INSERT语句提高到正常的写入优先级，可以消除该选项对单个INSERT语句的影响。