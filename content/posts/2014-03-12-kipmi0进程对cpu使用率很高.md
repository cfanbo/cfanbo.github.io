---
title: Kipmi0进程对CPU使用率很高
author: admin
type: post
date: 2014-03-12T01:57:35+00:00
url: /archives/14908
categories:
 - 服务器
tags:
 - Kipmi0

---
突然top发现Kipmi0进程一直占用近乎100%的一个核的资源，等待了一个下午，居然还是如此。

google查不到多少资料，看到一篇说法：是一些平台接口的管理器。不敢贸然杀死，再查查资料。

看看专业的说法：
kipmi is supposed to run with low priority. When you say it consumes `70-90% of the CPUs, is that constant (does it still consume the ` `processor when they are other tasks in the process queue that should ` `have a larger slice of the CPU time) or the 70%/90% comes when the ` `machine is idle? ``A second issue to investigate is whether you have pending controller ` `issues (alarms of varying nature that are not resolved) and/or older ` `versions of controller firmware. `

查看服务chkconfig 发现只有近似 ipmievd  服务，估计就是这个，跟网上资料说的ipmi有出入！

**Fix：不需要修复**
No fix required. You should ignore increased CPU utilization as it has no impact on actual system performance.

虽然这是一个利用空余的CPU资源进行一些接口自动调节的任务，但看着占那么多的资源还是怕出意外。

**找到：可以临时降低**

> echo 100 > /sys/module/ipmi\_si/parameters/kipmid\_max\_busy\_us

In our system,after set this parameter,the cpu of kipmi0 decreased to 15%.确实执行上面命令后，所占CPU单核资源从100%降低到10%

**You can try this.永久性降低**
To make the changes persistent you can configure the options for the ipmi_si kernel module.
Create a file in /etc/modprobe.d/, i.e./etc/modprobe.d/ipmi.conf, and add the following content:
\# Prevent kipmi0 from consuming 100% CPU
options ipmi_si kipmid_max_busy_us=100

上面这个编写进去去了，但还没reboot测试