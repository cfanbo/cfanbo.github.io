---
title: PHP 输入／输出流
author: admin
type: post
date: 2010-08-17T00:52:07+00:00
url: /archives/5123
IM_contentdowned:
 - 1
categories:
 - 程序开发
tags:
 - php

---
PHP 3.0.13 及以上版本，自 PHP 4.3.0 起支持 `php://output ` 和 `php://input `，自 PHP 5.0.0 起支持 `php://filter `。

 * `php://stdin `
 * `php://stdout `
 * `php://stderr `
 * `php://output `
 * `php://input `
 * `php://filter ` `php://stdin `， `php://stdout ` 和 `php://stderr ` 允许访问 PHP 进程相应的输入或者输出流。

`php://output ` 允许向输出缓冲机制写入数据，和 [**print()**][1] 与 [**echo()**][2] 的方式相同。

`php://input ` 允许读取 POST 的原始数据。和 $HTTP_RAW_POST_DATA 比起来，它给内存带来的压力较小，并且不需要任何特殊的 `php.ini ` 设置。 `php://input ` 不能用于 enctype=”multipart/form-data” 。 `php://stdin ` 和 `php://input ` 是只读的，同时 `php://stdout `， `php://stderr ` 和 `php://output ` 是只写的。

`php://filter ` 是一种设计用来允许过滤器程序在打开时成为流的封装协议。这对于单独具有完整功能的文件函数例如 [**readfile()**][3] ， [**file()**][4] 和 [**file\_get\_contents()**][5] 很有用，否则就没有机会在读取内容之前将过滤器应用于流之上。

`php://filter ` 的目标接受随后的“参数”作为其“路径”的一部分。

 * /resource=( _required_ ) 此参数必须位于 `php://filter ` 的末尾并且需要指向向要过滤的流。

`<span style="color: #000000;"><span style="color: #0000bb;"><?php<br />
</span><span style="color: #ff8000;">/* This is equivalent to simply:<br />
readfile("http://www.example.com");<br />
since 否 filters are actually  specified */</p>
<p></span><span style="color: #0000bb;">readfile </span><span style="color: #007700;">( </span><span style="color: #dd0000;">"php://filter/resource=http://www.example.com" </span><span style="color: #007700;">);<br />
</span><span style="color: #0000bb;">?> </span></span>`

 * /read=( _optional_ ) 本参数接受一个或多个过滤器的名字，用管道字符 | 分隔。

`<span style="color: #000000;"><span style="color: #0000bb;"><?php<br />
</span><span style="color: #ff8000;">/* This will output the contents of<br />
www.example.com  entirely in uppercase */<br />
</span><span style="color: #0000bb;">readfile </span><span style="color: #007700;">( </span><span style="color: #dd0000;">"php://filter/read=string.toupper/resource=http://www.example.com" </span><span style="color: #007700;">);</p>
<p></span><span style="color: #ff8000;">/* This will do  the same as above<br />
but will also ROT13 encode it */<br />
</span><span style="color: #0000bb;">readfile </span><span style="color: #007700;">( </span><span style="color: #dd0000;">"php://filter/read=string.toupper|string.rot13/resource=http://www.example.com" </span><span style="color: #007700;">);<br />
</span><span style="color: #0000bb;">?> </span></span>`

 * /write=( _optional_ ) 本参数接受一个或多个过滤器的名字，用管道字符 | 分隔。

`<span style="color: #000000;"><span style="color: #0000bb;"><?php<br />
</span><span style="color: #ff8000;">/* 下面的语句将使用 rot13 过滤器过滤 "Hello World"<br />
字符串，并写入当前目录下的  example.txt */<br />
</span><span style="color: #0000bb;">file_put_contents </span><span style="color: #007700;">( </span><span style="color: #dd0000;">"php://filter/write=string.rot13/resource=example.txt" </span><span style="color: #007700;">, </span><span style="color: #dd0000;">"Hello World" </span><span style="color: #007700;">);<br />
</span><span style="color: #0000bb;">?> </span></span>`

 * /( _optional_ ) 任何没有被 read= 或 write= 指定的过滤器会被同时应用于读写链。

**表格 L-6. 封装协议摘要（对于 php://filter ，是指被过滤的封装器摘要。）**

属性

支持

受限于 [allow_url_fopen](http://man.ddvip.com/web/php_manual_zh/ref.filesystem.html#ini.allow-url-fopen)。

否

允许读取

仅在 php://stdin 和 php://input 中允许。

允许写入

仅在 php://stdout , php://stderr , 和 php://output 中允许。

允许附加

仅在 php://stdout , php://stderr , 和 php://output 中允许 (与写入相同)。

允许同时读写

否。这些封装器是单向的。

支持 [**stat()**](http://man.ddvip.com/web/php_manual_zh/function.stat.html)
否

支持 [**unlink()**](http://man.ddvip.com/web/php_manual_zh/function.unlink.html)
否

支持 [**rename()**](http://man.ddvip.com/web/php_manual_zh/function.rename.html)
否

支持 [**mkdir()**](http://man.ddvip.com/web/php_manual_zh/function.mkdir.html)
否

支持 [**rmdir()**](http://man.ddvip.com/web/php_manual_zh/function.rmdir.html)
否


 [1]: http://man.ddvip.com/web/php_manual_zh/function.print.html
 [2]: http://man.ddvip.com/web/php_manual_zh/function.echo.html
 [3]: http://man.ddvip.com/web/php_manual_zh/function.readfile.html
 [4]: http://man.ddvip.com/web/php_manual_zh/function.file.html
 [5]: http://man.ddvip.com/web/php_manual_zh/function.file-get-contents.html