---
title: 自定义404页面返回不当状态码
author: admin
type: post
date: 2007-08-10T11:59:37+00:00
url: /archives/86
IM_contentdowned:
 - 1
categories:
 - 前端设计

---
HTTP [404][1] 错误意味着链接指向的网页不存在。在网站建设中想要完全避免这种情况是不可能的，比如说，我们常常需要对网站进行调整、改版，便会有网页被删除、改名或移动位置，这时候，虽然相应内容的网页还存在于网站中，但使用原来的地址访问则无法访问。——当然，对这类情况首先要考虑的是为原来页面地址做301重定向，以尽可能地减小对[SEO][2]效果的影响。——其次，在别人建立指向网站的链接时，也可能会由于出现拼写错误而使其成为一个无效的链接：在网站内找不到相应的内容页面。

简单说来，这类无效链接是由web服务器自动处理的：当Web 服务器接到类似的数据请求量，会返回一个 [404][1] 状态码，告诉对方其要请求的资源并不存在。但是，Web服务器默认的404错误页面，无论[Apache][3]还是[IIS][4]，均十分简陋、呆板且对用户不友好，无法给予用户寻找相应信息的更多线索，用户看到这类页面往往最直接的反应并是关闭浏览器窗口离开，这在很大程度上给网站造成损失。毕竟，对网站来说，用户永远是最重要的资源，以这种方式损失用户更意味着某种程度的失败。

这也是许多网站使用自定义[404][1] 错误页面的原因。通过良好的自定义404页面，可以包含对网站的相应介绍、用户可能感兴趣的内容链接或者网站内容导航链接、内容搜索功能等，能够有效地帮助访问者找到其欲寻找的内容或相似的内容，提高用户在网站内浏览更多信息的机会。

### 自定义404错误页面返回“200”或“302”状态码

从严格的技术角度，网站对404错误的处理策略，并不是一个[SEO][2]方面的工作，而属于网站可用性(usability)方面的问题。——当然，如果从广义的[SEO][2]范畴来看，提高网站可用性也属于[SEO][2]的基本操作。——但是，如果自定义404错误页面设置不当，则会极大地影响网站的[SEO][2]效果。

在许多朋友的印象中，自定义404错误页面只要能正确显示，只要能输入网站内某个并不存在的网页地址，在浏览器中能看到自定义的错误信息，便说明设置没问题。惭愧地说，本人也是抱有这种想法的一员，IT技术点评运行将近一年了，近日因[Google][5]更新后排名下降检查网站时才发现存在类似的错误：一个正确设置的[404][1]页面，不仅应当正确地显示，同时，应该能够正确返回“404”错误代码，而不是“200”或“302”。虽然对访问的用户而言，HTTP状态码究竟是“404”还是“200”来说并没有什么区别，但对搜索引擎而言，这则是相当重要的。

为什么这么说呢？让我们先来回顾一下搜索引擎收录与索引网页的过程：搜索引擎的Spider向网站服务器发送请求，要求读取某个网页，网站服务器接到请求后返回 HTTP 状态码响应请求，这些返回的HTTP状态码决定着搜索引擎的下一步行动：将该网页收录到索引数据库或者将其从索引数据库删除等。

当然，HTTP状态码有很多种，分别对应不同的情况，下面就与本文内容相关的几种作一简单介绍，更详细的信息可参考W3C规范：

 * **404** : 请求的网页不存在(不排除日后该链接有效的可能性)；
 * **410** : 请求的网页不存在(永久)；
 * **200** : 服务器成功返回网页
 * **302** : 网址临时重定向(跳转)
 * **301** : 网址永久重定向

需要说明的是，大部分搜索引擎将“404”与“410”状态同等对待，如[Google][5]。(参见Matt Cutts的说明)

当搜索引擎在请求某个Url时得到“404”状态回应时，便会知道该网页在网站内不复存在，从而在索引数据库中将其删除，——当然，这个删除过程有可能需要很长时间——而当搜索引擎得到“200”状态回应时，则会认为该url是有效的，并将其回到到索引数据库中。

### 404页面返回“200”状态码的后果

如果网站的自定义404错误页面在url无效时不返回“404”状态码而代之以“200”，会发生什么情况呢？很明显，搜索引擎会认为这个“根本不存在的”网页在网站内是存在的，这会导致很多问题，影响网站的最终SEO效果。

举例来说，比如说对“http://www.haohtml.com/a.html”、“http://www.haohtml.com/b.html”这两个在IT技术点评网站内并不存在的url而言，如果搜索引擎得到的回应状态码是“200”，那么，便会将其收录到索引数据库，这样的结果便是这两个不同的url具有完全相同的内容：自定义404错误页面的内容，这类重复文本(Duplicate Content)的现象对许多搜索引擎而言都是大忌。尤其是考虑到网站中不可能只有这两个无效链接，毕竟在网站建设中，无论网站的内部链接还是外部链接，总会不可避免地出现许多比如说拼写错误的情况，类似的重复内容会更多。这样，对搜索引擎而言，特别是Google，不但很难获得理想的网站信任指数，也会大大降低Google对网站质量的评定。

### 404错误页使用Meta Refresh带来的302问题

常常看到许多网站的自定义404错误页面采取类似这样的形式：首先显示一段错误信息，然后，通过Meta Refresh将页面跳转到网站首页、网页地图或其他类似页。根据具体实现方式不同，这类404页面可能返回“200”状态码，也可能返回“302”，但不论哪种，从SEO的角度看，均不是一种合适的选择。

对“200”状态的情况我们上面已经谈过，那么，当404页面返回“302”时，搜索引擎会怎么对待呢？从理论上说，对“302”错误，搜索引擎认为该网页是存在的，只不过临时改变了地址，仍然会索引收录该页，这样，同样会出现类似于“200”状态码时的重复文本问题；其次，以google为代表的主流搜索引擎对302重定向的适用范围要求越来越严格，这类不当使用302重定向的情况存在很大的风险。

因此，尽量不要在404错误页中使用这类Meta Refresh方法。如果实现希望实现类似的功能，即让显示错误信息几(十)秒后跳转到首页或其他页面，可以考虑在404错误页中使用Java Script跳转。——Java Script对搜索引擎而言是无益同时也无害的。

### 确保自定义404错误页面能够返回“404”状态码

在自定义404错误页面设置完毕后，一定要检查一下其是不是能够正确地返回“404”状态码。

检查的方法也相当简单，使用本站提供的Server Header检查工具，或其他类似工具如这个，输入一个网站内不存在网页的url，查看一下HTTP Header的返回情况，确信其返回的是“404 Not found”。

 [1]: /?tag=404
 [2]: /?tag=seo
 [3]: /?tag=apache
 [4]: /?tag=iis
 [5]: http://www.google.com