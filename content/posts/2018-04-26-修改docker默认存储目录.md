---
title: 修改docker默认存储目录(转）
author: admin
type: post
date: 2018-04-26T04:06:59+00:00
url: /archives/17794
categories:
 - 系统架构
tags:
 - docker

---
# Docker 修改默认存储位置 {#docker-修改默认存储位置}

 * 首先使用 docker info 查看 docker 的基本信息

```bash hljs has-numbering
<span class="hljs-built_in">sudo</span> docker info
Containers: <span class="hljs-number">0</span>
Images: <span class="hljs-number">5</span>
Storage Driver: devicemapper
 Pool Name: docker-<span class="hljs-number">253</span>:<span class="hljs-number">0</span>-<span class="hljs-number">679369</span>-pool
 Pool Blocksize: <span class="hljs-number">65.54</span> kB
 Backing Filesystem: extfs
 Data file:
 Metadata file:
 Data Space Used: <span class="hljs-number">533.9</span> MB
 Data Space Total: <span class="hljs-number">107.4</span> GB
 Data Space Available: <span class="hljs-number">106.8</span> GB
 Metadata Space Used: <span class="hljs-number">954.4</span> kB
 Metadata Space Total: <span class="hljs-number">2.147</span> GB
 Metadata Space Available: <span class="hljs-number">2.147</span> GB
 Udev Sync Supported: <span class="hljs-literal">true</span>
 Deferred Removal Enabled: <span class="hljs-literal">false</span>
 Library Version: <span class="hljs-number">1.02</span>.<span class="hljs-number">89</span>-RHEL6 (<span class="hljs-number">2014</span>-<span class="hljs-number">09</span>-<span class="hljs-number">01</span>)
Execution Driver: native-<span class="hljs-number">0.2</span>
Logging Driver: json-file
Kernel Version: <span class="hljs-number">2.6</span>.<span class="hljs-number">32</span>-<span class="hljs-number">431.29</span>.<span class="hljs-number">2</span>.el6.x86_64
Operating System: <unknown>
CPUs: <span class="hljs-number">1</span>
Total Memory: <span class="hljs-number">853.5</span> MiB
Name: rhel62build
ID: LIO4:I43U:YFQU:SN45:YOE6:<span class="hljs-number">7</span>GTF:<span class="hljs-number">6</span>AGX:VSKQ:ICIV:AKWD:<span class="hljs-number">3</span>OKQ:HUSC
```

这是一个新装的docker环境，其中看不出当前docker文件存储的路径。但是docker默认会使用 /var/lib/docker 作为默认存储位置。

 * 停止 Docker 服务

```bash hljs has-numbering
<span class="hljs-built_in">sudo</span> /etc/init.d/docker stop
```

 * 将原来默认的/var/lib/docker备份一下，然后复制到别的位置并建立一个软链接

```basn hljs bash has-numbering
<span class="hljs-built_in">cd</span> /var/lib
<span class="hljs-built_in">sudo</span> cp -rf docker docker.bak
<span class="hljs-built_in">sudo</span> cp -rf docker /<my_new_location>/
<span class="hljs-built_in">sudo</span> ln <span class="hljs-operator">-s</span> /<my_new_location>/docker docker
```

 * 启动 Docker 服务

```bash hljs has-numbering
<span class="hljs-built_in">sudo</span> /etc/init.d/docker start
```

 * 最后使用 docker info 查看更新结果

```bash hljs has-numbering
<span class="hljs-built_in">sudo</span> docker info
Containers: <span class="hljs-number">0</span>
Images: <span class="hljs-number">5</span>
Storage Driver: devicemapper
 Pool Name: docker-<span class="hljs-number">8</span>:<span class="hljs-number">21</span>-<span class="hljs-number">393695</span>-pool
 Pool Blocksize: <span class="hljs-number">65.54</span> kB
 Backing Filesystem: extfs
 Data file: /dev/loop1
 Metadata file: /dev/loop2
 Data Space Used: <span class="hljs-number">533.9</span> MB
 Data Space Total: <span class="hljs-number">107.4</span> GB
 Data Space Available: <span class="hljs-number">15.33</span> GB
 Metadata Space Used: <span class="hljs-number">954.4</span> kB
 Metadata Space Total: <span class="hljs-number">2.147</span> GB
 Metadata Space Available: <span class="hljs-number">2.147</span> GB
 Udev Sync Supported: <span class="hljs-literal">true</span>
 Deferred Removal Enabled: <span class="hljs-literal">false</span>
 Data loop file: /build/docker/devicemapper/devicemapper/data
 Metadata loop file: /build/docker/devicemapper/devicemapper/metadata
 Library Version: <span class="hljs-number">1.02</span>.<span class="hljs-number">89</span>-RHEL6 (<span class="hljs-number">2014</span>-<span class="hljs-number">09</span>-<span class="hljs-number">01</span>)
Execution Driver: native-<span class="hljs-number">0.2</span>
Logging Driver: json-file
Kernel Version: <span class="hljs-number">2.6</span>.<span class="hljs-number">32</span>-<span class="hljs-number">431.29</span>.<span class="hljs-number">2</span>.el6.x86_64
Operating System: <unknown>
CPUs: <span class="hljs-number">1</span>
Total Memory: <span class="hljs-number">853.5</span> MiB
Name: rhel62build
ID: LIO4:I43U:YFQU:SN45:YOE6:<span class="hljs-number">7</span>GTF:<span class="hljs-number">6</span>AGX:VSKQ:ICIV:AKWD:<span class="hljs-number">3</span>OKQ:HUSC
```

转载请以链接形式标明本文地址
本文地址： [http://blog.csdn.net/kongxx/article/details/50310653](http://blog.csdn.net/kongxx/article/details/50310653)